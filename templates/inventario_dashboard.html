{% extends "base.html" %}

{% block title %}Inventario General{% endblock %}
{% block header %}üì¶ Inventario General{% endblock %}

{% block content %}
<div class="container py-4">

    <!-- ===========================================
         FILTROS GRANDES (Color / Talla)
    ============================================ -->
    <div class="card shadow-sm p-4 mb-4" style="border-radius: 20px;">
        <h3 class="fw-bold text-primary mb-3">üîç Buscar en Inventario</h3>

        <form method="GET" action="{{ url_for('inventario_dashboard') }}" class="row g-4">

            <!-- Select Color -->
            <div class="col-md-4">
                <label class="form-label fw-bold">Color:</label>
                <select name="color_id" class="form-select form-select-lg">
                    <option value="">Todos los colores</option>
                    {% for c in colores %}
                        <option value="{{ c.id }}" {% if color_seleccionado == c.id|string %}selected{% endif %}>
                            {{ c.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Select Talla -->
            <div class="col-md-4">
                <label class="form-label fw-bold">Talla:</label>
                <select name="talla_id" class="form-select form-select-lg">
                    <option value="">Todas las tallas</option>
                    {% for t in tallas %}
                        <option value="{{ t.id }}" {% if talla_seleccionada == t.id|string %}selected{% endif %}>
                            {{ t.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Botones Grandes -->
            <div class="col-md-4 d-flex align-items-end gap-2">
                <button class="btn btn-primary btn-lg w-100" type="submit">
                    üîé Buscar
                </button>

                <a href="{{ url_for('inventario_dashboard') }}" class="btn btn-secondary btn-lg w-100">
                    üßπ Limpiar
                </a>
            </div>
        </form>
    </div>


    <!-- ===========================================
         KPI RESULTADO
    ============================================ -->
    <div class="text-center">

        {% set total = inventarios | length %}

        <div class="card shadow p-4 mx-auto" style="width: 330px; border-radius: 25px;">
            <h4 class="fw-bold text-secondary">Total Encontrado</h4>
            <div class="display-2 fw-bold text-primary mt-2">
                {{ total }}
            </div>

            <!-- Descripci√≥n din√°mica -->
            <p class="mt-3 fs-5">
                {% if color_seleccionado and talla_seleccionada %}
                    Resultados filtrados por <b>color y talla</b>.
                {% elif color_seleccionado %}
                    Resultados filtrados por <b>color</b>.
                {% elif talla_seleccionada %}
                    Resultados filtrados por <b>talla</b>.
                {% else %}
                    Mostrando todo el inventario disponible.
                {% endif %}
            </p>
        </div>

    </div>

</div>
{% endblock %}